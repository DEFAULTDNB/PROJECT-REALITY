<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"> 
<title>PROJECT REALITY</title>
<link rel="stylesheet" href="Config/N64.css">
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="icon" href="Config/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="Config/favicon.png" />
</head>
<body>
<div id="logo"><center><image src="Config/LOGO.png" height="150" width="150" style="-webkit-filter: drop-shadow(10px 10px 10px #222); filter: drop-shadow(10px 10px 10px #222);"></image></center></div>
<h1>GAMES CATALOG</h1>
<div class="frame" id="frame">
<div class="card-header" id="frametitle">GAME TITLE</div>
<span class="closebtn" onclick="this.parentElement.style.display='none';">Ã—</span>
<BR>
	<div id="collectables">
		<label class="switch"><input type="checkbox"><span class="slider round"></span></label>
		<br><br>
		<label class="switch"><input type="checkbox"><span class="slider round"></span></label>
		<br><br>
		<label class="switch"><input type="checkbox"><span class="slider round"></span></label>
	</div>
</div>
<center><div id="main" class="main" style="border: none;"></div><center>
<script>
document.getElementById("frame").style.display = "none";
var fileName = "Config/N64.cfg";
var xmlFile = new XMLHttpRequest;
xmlFile.open('get', fileName, false);
xmlFile.send(null);
var xmlDoc = xmlFile.responseText;
var lines = xmlDoc.split("\r\n");
let titleCount = lines.length;
var coverFlow =(function(a,b){while(a--)b[a]=a+1;return b})(titleCount,[]);
var g = 0;
var h = 0;
const jpboxes = [];
let alphamatch = [];
const alphaboxes = [];
document.getElementById("frametitle").style.color = "white";

//loop-da-loop//////////////////////////////////////////
for (i=0; i < titleCount; i++){
	var div = document.createElement("div");
	document.getElementById("main").appendChild(div);
	div.id = "card"+coverFlow[i];	
	var info = coverFlow[i]-1;
	var gTitle = lines[info].slice( (lines[info]), (lines[info].indexOf("GENRE=")-1) ) || lines[info].slice( (lines[info]), (lines[info].indexOf("ALT=")-1) ).stringify();
	
	if (lines[info].match("REGIONS=J ")){
		jpboxes.push(coverFlow[i]);
		div.style.backgroundImage = "url('Covers/"+gTitle+" J.png')";
		} else if (lines[info].match("REGIONS=JU ")){
		div.style.backgroundImage = "url('Covers/"+gTitle+" U.png')";
		} else if(lines[info].match("REGIONS=JUE ")){
		div.style.backgroundImage = "url('Covers/"+gTitle+" E.png')";
		} else if (lines[info].match("REGIONS=UE ")){
		div.style.backgroundImage = "url('Covers/"+gTitle+" E.png')";
		} else if (lines[info].match("REGIONS=U ")){
		div.style.backgroundImage = "url('Covers/"+gTitle+" U.png')";
		} else if (lines[info].match("REGIONS=JE ")){
		div.style.backgroundImage = "url('Covers/"+gTitle+" E.png')";
		} else if (lines[info].match("REGIONS=E ")){
		div.style.backgroundImage = "url('Covers/"+gTitle+" E.png')";
		} else if (lines[info].match("REGIONS=F ")){
		div.style.backgroundImage = "url('Covers/"+gTitle+" F.png')";
		} else if (lines[info].match("REGIONS=D ")){
		div.style.backgroundImage = "url('Covers/"+gTitle+" D.png')";
		} else if (lines[info].match("REGIONS=A ")){
		div.style.backgroundImage = "url('Covers/"+gTitle+" A.png')";
		} else if (lines[info].match("REGIONS=UA ")){
		div.style.backgroundImage = "url('Covers/"+gTitle+" A.png')";
		} else if (lines[info].match("REGIONS=JUA ")){
		div.style.backgroundImage = "url('Covers/"+gTitle+" A.png')";
	}
	alphamatch.push(lines[info].charAt(0));
	//card styling
	div.style.height = "180px";
	div.style.width = "400px" ;
	//make div within for boxart?
	div.style.border ="thin solid grey";
	div.style.backgroundColor = "rgba(0,0,0,0.5)";
	div.style.color = "white";
	div.style.textShadow = "1.5px 2px #000000";
	div.style.fontSize = "17px";
	div.style.display = "inline-block";
	div.style.backgroundRepeat = "no-repeat";
	//div.style.backgroundSize ="contain"; //220px
	div.style.backgroundSize ="225px"; //220px
	div.style.backgroundPosition = "5px 8px"
	/*div.addEventListener("click", function(){
	alert(this.id);
	let tile = document.getElementById(this.id).style.backgroundImage;
	let shorter = tile.slice( (tile.indexOf("(")+2) , (tile.indexOf(")")-1) );
	window.open(shorter);
	});*/
	//card text from file
	var gYear = lines[info].slice( (lines[info].indexOf("DATE=")+5), (lines[info].indexOf("SCORE=")-1) );
	var gGenre = lines[info].slice( (lines[info].indexOf("GENRE=")+6), (lines[info].indexOf("PUB=")-1) );
	var gScore = lines[info].slice( (lines[info].indexOf("SCORE=")+6), (lines[info].indexOf("REGIONS=")-1) );
	div.innerHTML = "<div style='position: relative; left: 110px; top: 8px; height: 162px; width: 160px; border: thin solid; border-color: grey; white-space: wrap; overflow: hidden;'><span style='color:green'>No: </span>"+coverFlow[i]+"/"+titleCount+"<button id='"+coverFlow[i]+"' style='position: relative; left: 15px;' onclick='reply_click(this.id)'>ðŸŽ®</button><br>"+gTitle+"<br><span style='color:yellow'>Date: </span>"+gYear+"<br><span style='color:yellow'>Genre: </span>"+gGenre+"<br><span style='color:yellow'>Score: </span>"+gScore+"%</span></label></div>";
//border-color: yellow blue red green;
}

//end-main-loop//
	for (j=0; j < jpboxes.length; j++){
	document.getElementById("card"+jpboxes[j]).style.backgroundSize ="120px";
	document.getElementById("card"+jpboxes[j]).style.backgroundPosition = "60px 8px";
	}
//end-fix-jpboxes//
function reply_click(clicked_id){
document.getElementById("frame").style.display = "block";
document.getElementById("frametitle").innerHTML = lines[clicked_id-1].slice( (lines[clicked_id-1]), (lines[clicked_id-1].indexOf("GENRE=")-1) );
	switch (clicked_id){
	case ",":;
	break;
	default: r = confirm("Open larger image?");
		if (r == true) {
		let tile = document.getElementById("card"+clicked_id).style.backgroundImage;
		let shorter = tile.slice( (tile.indexOf("(")+2) , (tile.indexOf(")")-1) );
		window.open(shorter);
		} else {
		}
	}
}
function AZclick() {
	switch (document.getElementById("myText").value){
	case "0": document.getElementById('card'+(alphamatch.indexOf("0")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "1": document.getElementById('card'+(alphamatch.indexOf("1")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "6": document.getElementById('card'+(alphamatch.indexOf("6")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "a": case "A": document.getElementById('card'+(alphamatch.indexOf("A")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "b": case "B": document.getElementById('card'+(alphamatch.indexOf("B")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "c": case "C": document.getElementById('card'+(alphamatch.indexOf("C")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "d": case "D": document.getElementById('card'+(alphamatch.indexOf("D")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "e": case "E": document.getElementById('card'+(alphamatch.indexOf("E")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "f": case "F": document.getElementById('card'+(alphamatch.indexOf("F")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "g": case "G": document.getElementById('card'+(alphamatch.indexOf("G")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "h": case "H": document.getElementById('card'+(alphamatch.indexOf("H")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "i": case "I": document.getElementById('card'+(alphamatch.indexOf("I")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "j": case "J": document.getElementById('card'+(alphamatch.indexOf("J")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "k": case "K": document.getElementById('card'+(alphamatch.indexOf("K")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "l": case "L": document.getElementById('card'+(alphamatch.indexOf("L")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "m": case "M": document.getElementById('card'+(alphamatch.indexOf("M")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "n": case "N": document.getElementById('card'+(alphamatch.indexOf("N")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "o": case "O": document.getElementById('card'+(alphamatch.indexOf("O")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "p": case "P": document.getElementById('card'+(alphamatch.indexOf("P")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "q": case "Q": document.getElementById('card'+(alphamatch.indexOf("Q")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "r": case "R": document.getElementById('card'+(alphamatch.indexOf("R")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "s": case "S": document.getElementById('card'+(alphamatch.indexOf("S")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "t": case "T": document.getElementById('card'+(alphamatch.indexOf("T")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "v": case "V": document.getElementById('card'+(alphamatch.indexOf("U")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "w": case "W": document.getElementById('card'+(alphamatch.indexOf("V")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "x": case "X": document.getElementById('card'+(alphamatch.indexOf("X")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "y": case "Y": document.getElementById('card'+(alphamatch.indexOf("Y")+1)).scrollIntoView({behavior: 'auto' }); break;
	case "z": case "Z": document.getElementById('card'+(alphamatch.indexOf("Z")+1)).scrollIntoView({behavior: 'auto' }); break;
	default:
	}
  }
var scrolling = false;
function scrollMode() {
  if (scrolling == true) {
    noscroll();
  } else {
    scrollit();
  }
}
function scrollit(){
setInterval(function() {window.scrollBy(0, g);}, h);
	scrolling = true;
	g = 1;
	h = 20;
 }
function noscroll(){
	scrolling = false;
	g = 0;
	h = 0;
}
document.body.addEventListener("keypress", function(event) {
	if (event.key === "Enter") {
		event.preventDefault();
		document.getElementById("find").click();
		}
})
</script>
<button id="top" onclick="document.getElementById('logo').scrollIntoView({behavior: 'auto' }); noscroll();" class="buttonU">â†‘</button>
<input type="text" id="myText" value="0" class="search" maxlength="1" size="1" onclick="this.value=''">
<button id="find" onclick="AZclick();" class="buttonFind">âŒ•</button>
<button id="scroll" onclick="scrollMode();" class="buttonScroll">Scroll</button>
<button id="bottom" onclick="document.getElementById('footer').scrollIntoView({behavior: 'auto' });" class="buttonD">â†“</button>
<div id="footer" class="footer">DEFAULTDNB 2022</div>
</body>
</html>